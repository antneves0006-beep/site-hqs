<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PublicaÃ§Ã£o de HQs e Livros</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: #f2f3f7; }
    header { background: linear-gradient(135deg,#1f2937,#111827); color: #fff; padding: 25px 15px; text-align: center; }
    header h1 { margin: 0; font-size: 26px; }
    header p { opacity: .9; }
    main { max-width: 900px; margin: auto; padding: 20px; }

    .card { background: #fff; padding: 18px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 10px 25px rgba(0,0,0,.08); }
    h2 { margin-top: 0; }

    input, textarea, select {
      width: 100%; padding: 12px; margin-top: 10px;
      border-radius: 10px; border: 1px solid #ddd; font-size: 16px;
    }

    button {
      width: 100%; padding: 12px; margin-top: 12px;
      background: #6366f1; color: #fff; border: none;
      border-radius: 12px; font-size: 16px; cursor: pointer;
      transition: .2s;
    }
    button:hover { background: #4f46e5; }

    img { max-width: 100%; border-radius: 14px; margin-top: 12px; }

    .hidden { display: none; }

    .obra-title { font-size: 20px; font-weight: bold; margin-bottom: 5px; }
    .capitulo-title { color: #6b7280; font-size: 14px; margin-bottom: 10px; }

    @media(max-width:600px){
      header h1 { font-size: 22px; }
    }
  </style>
</head>
<body>

<header>
  <h1>ðŸ“š Plataforma de HQs e Livros</h1>
  <p id="userInfo"></p>
</header>

<main>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h2>Login</h2>
  <input id="loginUser" placeholder="UsuÃ¡rio" />
  <input id="loginPass" type="password" placeholder="Senha" />
  <button onclick="login()">Entrar / Registrar</button>
</div>

<!-- PUBLICAÃ‡ÃƒO -->
<div id="postBox" class="card hidden">
  <h2>Nova PublicaÃ§Ã£o</h2>
  <input id="titulo" placeholder="TÃ­tulo da obra" />
  <input id="capitulo" placeholder="CapÃ­tulo" />
  <select id="tipo">
    <option value="HQ">HQ</option>
    <option value="Livro">Livro</option>
  </select>
  <textarea id="conteudo" rows="5" placeholder="Texto do capÃ­tulo"></textarea>
  <input id="imagens" type="file" accept="image/*" multiple />
  <button onclick="publicar()">Publicar</button>
</div>

<!-- OBRAS -->
<div id="lista"></div>

</main>

<script>
let usuario = localStorage.getItem('usuario');
let usuarios = JSON.parse(localStorage.getItem('usuarios')) || {};
let posts = JSON.parse(localStorage.getItem('posts')) || [];

function login(){
  const u = loginUser.value;
  const s = loginPass.value;
  if(!usuarios[u]) usuarios[u] = s;
  if(usuarios[u] !== s) return alert('Senha incorreta');
  localStorage.setItem('usuarios', JSON.stringify(usuarios));
  usuario = u;
  localStorage.setItem('usuario', u);
  iniciar();
}

function iniciar(){
  userInfo.innerText = 'Logado como: ' + usuario;
  loginBox.classList.add('hidden');
  postBox.classList.remove('hidden');
  render();
}

function publicar(){
  const files = imagens.files;
  const imgs = [];
  if(files.length){
    let l=0;
    for(let f of files){
      const r = new FileReader();
      r.onload = ()=>{ imgs.push(r.result); if(++l===files.length) salvar(imgs); };
      r.readAsDataURL(f);
    }
  } else salvar([]);
}

function salvar(imgs){
  posts.push({
    titulo: titulo.value,
    capitulo: capitulo.value,
    tipo: tipo.value,
    conteudo: conteudo.value,
    imagens: imgs,
    dono: usuario
  });
  localStorage.setItem('posts', JSON.stringify(posts));
  titulo.value = capitulo.value = conteudo.value = '';
  imagens.value = '';
  render();
}

function render(){
  lista.innerHTML = '';
  posts.forEach(p=>{
    const d = document.createElement('div');
    d.className = 'card';
    d.innerHTML = `<h3>${p.titulo} - ${p.capitulo}</h3><p>${p.conteudo}</p>`;
    p.imagens.forEach(i=> d.innerHTML += `<img src="${i}">`);
    lista.appendChild(d);
  });
}

if(usuario) iniciar();
</script>

</body>
</html>
